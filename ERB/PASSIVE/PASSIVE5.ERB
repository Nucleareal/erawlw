@PASSIVE_TURNEND_5, ARG, ARG:1

SIF ASSI < 0
	RETURN 0

SIF NO:ASSI != ARG:1
	RETURN 0
	
SIF TALENT:ASSI:(200+ARG:1) == 0
	RETURN 0
	
SIF CFLAG:ASSI:101
	RETURN 0
	
LOCAL = -1
REPEAT CHARANUM
	SIF COUNT == 0
		CONTINUE

	IF TALENT:COUNT:0 == 0
		LOCAL = 1
		BREAK
	ENDIF
REND

IF LOCAL < 0
	RETURN 0
ENDIF

DRAWLINE
PRINTFORML ――[%TALENTNAME:(200+ARG:1)%]発動――
DRAWLINE

PRINTL どの奴隷の[%TALENTNAME:0%]を復活させますか？

REPEAT CHARANUM
	SIF COUNT == 0
		CONTINUE

	IF TALENT:COUNT:0 && EXP:COUNT:0 == 0
		PRINTFORML [---] - %CALLNAME:COUNT% ×完全な処女です
		CONTINUE
	ENDIF
	
	IF TALENT:COUNT:0 && EXP:COUNT:0 > 0
		PRINTFORML [{COUNT,3,RIGHT}] - %CALLNAME:COUNT% ○∨経験を消去します
		CONTINUE
	ENDIF
	
	PRINTFORML [{COUNT,3,RIGHT}] - %CALLNAME:COUNT% ○復活できます
REND

DRAWLINE

PRINTL [100]復活させない
PRINTL [200]次のターン以降表示させない

DRAWLINE

$INPUT_LOOP
INPUT

LOCAL = RESULT

IF RESULT == 100
	RETURN 0
ELSEIF RESULT == 200
	CFLAG:ASSI:101 = 1
	RETURN 0
ELSEIF RESULT <= 0 || RESULT >= CHARANUM
	RETURN 0
ELSEIF TALENT:COUNT:0
	IF EXP:0 == 0
		CLEARLINE 1
		REUSELASTLINE 正しい値を入力して下さい
		GOTO INPUT_LOOP
	ENDIF
	
	STR:2 = ∨経験を消去しました
ELSE
	STR:2 = [%TALENTNAME:0%]を完全復活させました
ENDIF

TALENT:LOCAL:0 = 1
EXP:LOCAL:0 = 0
TALENT:ASSI:(200+ARG:1) = 0

PRINTFORML %CALLNAME:LOCAL%の%STR:2%
WAIT
DRAWLINE

RETURN 0
