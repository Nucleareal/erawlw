@COM_ORDER

;ABL:従順
IF ABL:0
	A += ABL:0 * 4
	PRINTS ABLNAME:0
	PRINTV 'LV,ABL:0,'(,ABL:0 * 4,')
	S = 1
ENDIF
;ABL:マゾっ気
IF ABL:8
	SIF S
		PRINT  + 
	A += ABL:8*2
	PRINTS ABLNAME:8
	PRINTV 'LV,ABL:8,'(,ABL:8*2,')
	S = 1
ENDIF

IF TALENT:98
	CALL CHECK_BLIND_COM
	IF RESULT
		SIF S
			PRINT  - 
		A -= 6 * RESULT
		PRINTS TALENTNAME:98
		PRINTFORM ({6*RESULT})
		S = 1
	ENDIF
ENDIF

;レズ調教
IF TALENT:PLAYER:122 == 0 && TALENT:TARGET:122 == 0
	;ABL:レズっ気
	IF ABL:9
		SIF S
			PRINT  + 
		A += ABL:9*3
		PRINTS ABLNAME:9
		PRINTV 'LV,ABL:9,'(,ABL:9*3,')
		S = 1
	ENDIF
	;ABL:レズ中毒
	IF ABL:12
		SIF S
			PRINT  + 
		A += ABL:12*3
		PRINTS ABLNAME:12
		PRINTV 'LV,ABL:12,'(,ABL:12*3,')
		S = 1
	ENDIF
	;TALENT:両刀
	IF TALENT:81
		SIF S
			PRINT  + 
		A += 10
		PRINTS TALENTNAME:81
		PRINTV '(,10,')
		S = 1
	ENDIF
	;好奇心
	IF TALENT:23
		SIF S
			PRINT  + 
		A += 7
		PRINTS TALENTNAME:23
		PRINTV '(,7,')
		S = 1
	ENDIF
	;保守的
	IF TALENT:24
		PRINT  - 
		A -= 13
		PRINTS TALENTNAME:24
		PRINTV '(,13,')
		S = 1
	ENDIF
ELSE
	;好奇心
	IF TALENT:23
		SIF S
			PRINT  + 
		A += 5
		PRINTS TALENTNAME:23
		PRINTV '(,5,')
		S = 1
	ENDIF
	;保守的
	IF TALENT:24
		PRINT  - 
		A -= 10
		PRINTS TALENTNAME:24
		PRINTV '(,10,')
		S = 1
	ENDIF
ENDIF

;刻印チェック
IF MARK:0
	SIF S
		PRINT  + 
	A += MARK:0 * 5
	PRINTS MARKNAME:0
	PRINTV 'LV,MARK:0,'(,MARK:0 * 5,')
	S = 1
ENDIF

IF TALENT:15
	T = 4
ELSEIF TALENT:17
	T = 1
ELSE
	T = 2
ENDIF

IF MARK:2
	SIF S
		PRINT  + 
	A += MARK:2 * 3 * T
	PRINTS MARKNAME:2
	PRINTV 'LV,MARK:2,'(,MARK:2 * 3 * T,')
	S = 1
ENDIF
IF MARK:3
	PRINT  - 
	A -= MARK:3 * 2 * T
	PRINTS MARKNAME:3
	PRINTV 'LV,MARK:3,'(,MARK:3 * 2 * T,')
	S = 1
ENDIF

;PALAM:恭順
IF PALAM:4 < PALAMLV:1
	L = 0
ELSEIF PALAM:4 < PALAMLV:2
	L = 1
ELSEIF PALAM:4 < PALAMLV:3
	L = 2
ELSEIF PALAM:4 < PALAMLV:4
	L = 3
ELSEIF PALAM:4 < PALAMLV:5
	L = 4
ELSE
	L = 5
ENDIF
IF L
	SIF S
		PRINT  + 
	A += L * 3
	PRINTS PALAMNAME:4
	PRINTV 'LV,L,'(,L * 3,')
	S = 1
ENDIF

;PALAM:恐怖
IF PALAM:10 < PALAMLV:1
	L = 0
ELSEIF PALAM:10 < PALAMLV:2
	L = 1
ELSEIF PALAM:10 < PALAMLV:3
	L = 2
ELSEIF PALAM:10 < PALAMLV:4
	L = 3
ELSEIF PALAM:10 < PALAMLV:5
	L = 4
ELSE
	L = 5
ENDIF
IF L
	SIF S
		PRINT  + 
	A += L * 3
	PRINTS PALAMNAME:10
	PRINTV 'LV,L,'(,L * 3,')
	S = 1
ENDIF

;反抗的
IF TALENT:11
	PRINT  - 
	A -= 5
	PRINTS TALENTNAME:11
	PRINTV '(,5,')
	S = 1
ENDIF
;気丈
IF TALENT:12
	PRINT  - 
	A -= 5
	PRINTS TALENTNAME:12
	PRINTV '(,5,')
	S = 1
ENDIF
;素直
IF TALENT:13
	SIF S
		PRINT  + 
	A += 5
	PRINTS TALENTNAME:13
	PRINTV '(,5,')
	S = 1
ENDIF
;自尊心
IF TALENT:15
	PRINT  - 
	A -= 15
	PRINTS TALENTNAME:15
	PRINTV '(,15,')
	S = 1
ENDIF
;プライド低い
IF TALENT:17
	SIF S
		PRINT  + 
	A += 5
	PRINTS TALENTNAME:17
	PRINTV '(,5,')
	S = 1
ENDIF
;目立ちたがり
IF TALENT:28
	SIF S
		PRINT  + 
	A += 2
	PRINTS TALENTNAME:28
	PRINTV '(,2,')
	S = 1
ENDIF
;抑圧
IF TALENT:32
	PRINT  - 
	A -= 10
	PRINTS TALENTNAME:32
	PRINTV '(,10,')
	S = 1
ENDIF
;抵抗
IF TALENT:34
	PRINT  - 
	A -= 10
	PRINTS TALENTNAME:34
	PRINTV '(,10,')
	S = 1
ENDIF
;弱味
IF TALENT:37
	SIF S
		PRINT  + 
	A += 12
	PRINTS TALENTNAME:37
	PRINTV '(,12,')
	S = 1
ENDIF
;即落ち
IF TALENT:73
	SIF S
		PRINT  + 
	A += 10
	PRINTS TALENTNAME:73
	PRINTV '(,10,')
	S = 1
ENDIF
;妄信
IF TALENT:86
	SIF S
		PRINT  + 
	A += 8
	PRINTS TALENTNAME:86
	PRINTV '(,8,')
	S = 1
ENDIF

;烙印
IF TALENT:89
	IF CFLAG:TARGET:789 < 0
		;烙印を押された相手が消失している
		
		PRINT  - 
		A -= 999
		PRINTFORM %TALENTNAME:89%:相手消失(999)
		
	ELSEIF PLAYER == CFLAG:TARGET:789
		;烙印を押された相手
		PRINT  + 
		A += 100
		PRINTFORM %TALENTNAME:89%:%NAME:(CFLAG:TARGET:789)%(100)
	ELSE
		;烙印を押された相手ではない
		PRINT  - 
		A -= 100
		PRINTFORM %TALENTNAME:89%:%NAME:(CFLAG:TARGET:789)%(100)
	ENDIF
	S = 1
ENDIF

;調教者の素質
;魅惑
IF TALENT:PLAYER:91
	SIF S
		PRINT  + 
	A += 6
	PRINTS TALENTNAME:91
	PRINTV '(,6,')
	S = 1
ENDIF
;謎の魅力
IF TALENT:PLAYER:92
	SIF S
		PRINT  + 
	A += 6
	PRINTS TALENTNAME:92
	PRINTV '(,6,')
	S = 1
ENDIF
;サド
IF TALENT:PLAYER:83
	SIF S
		PRINT  + 
	A += 3
	PRINTS TALENTNAME:83
	PRINTV '(,3,')
	S = 1
ENDIF

;相性チェック
R = NO:PLAYER
IF RELATION:R > 0 && RELATION:R < 30
	PRINT  - 
	A -= 10
	PRINT 相性最悪
	PRINTV '(,10,')
	S = 1
ELSEIF RELATION:R > 0 && RELATION:R < 70
	PRINT  - 
	A -= 6
	PRINT 相性悪い
	PRINTV '(,10,')
	S = 1
ELSEIF RELATION:R > 0 && RELATION:R < 100
	PRINT  - 
	A -= 3
	PRINT 相性いまいち
	PRINTV '(,3,')
	S = 1
ELSEIF RELATION:R >= 100 && RELATION:R < 130
	SIF S
		PRINT  + 
	A += 3
	PRINT 相性ややよい
	PRINTV '(,3,')
	S = 1
ELSEIF RELATION:R >= 100 && RELATION:R < 170
	SIF S
		PRINT  + 
	A += 6
	PRINT 相性よい
	PRINTV '(,6,')
	S = 1
ELSEIF RELATION:R >= 100 && RELATION:R >= 170
	SIF S
		PRINT  + 
	A += 10
	PRINT 相性最高
	PRINTV '(,10,')
	S = 1
ENDIF

;拒絶刻印チェック
;TODO

;パッシブチェック

SIF ASSI < 0
	RETURN 0

IF NO:ASSI == 13
	SIF S
		PRINT  + 
	PRINTS TALENTNAME:213
	
	A += ABL:ASSI:2 * 2
	
	PRINTFORM ({ABL:ASSI:2 * 2})
ELSE
ENDIF
