;---------------------------------------------------------
; 情報表示
;---------------------------------------------------------
@SHOW_INFO
PRINT_ABL TARGET
PRINT_TALENT TARGET
PRINT_MARK TARGET
PRINT_EXP TARGET
CALL DISPLAY_KOJO_MESSAGE_IMPRESSION_MAIN_SLAVE
CALL DISPLAY_KOJO_MESSAGE_IMPRESSION_MAIN_ASSI
WAIT

;---------------------------------------------------------
; ステータス表示
;---------------------------------------------------------
@SHOW_STATUS
DRAWLINE
PRINTV DAY+1
PRINT 日目
IF TIME == 0
	PRINTL  朝
ELSE
	PRINTL  夜
ENDIF
IF ASSIPLAY
	FONTSTYLE 1
	PRINTFORM 助手：%CALLNAME:ASSI%
	FONTSTYLE 0
	PRINTFORM が
ELSE
	FONTSTYLE 1
	PRINTFORM %NAME:MASTER%
	FONTSTYLE 0
	PRINTFORM が
ENDIF
PRINTS NAME:TARGET
PRINTL 調教中
IF TARGET > 0
	CALL LIFE_BAR, TARGET
ENDIF

IF TARGET > 0 && MAXBASE:1 > 0
	PRINT 気力
	A = BASE:1
	SIF BASE:1 < 0
		A = 0
	BAR A,MAXBASE:1,32
	PRINTFORML ({A}/{MAXBASE:1})
	PRINT_PALAM TARGET

	SIF MAXBASE:2 == 0
		MAXBASE:2 == 10000
	SIF MAXBASE:MASTER:2 == 0
		MAXBASE:MASTER:2 == 10000
	IF ASSI >= 0
		SIF MAXBASE:ASSI:2 == 0
			MAXBASE:ASSI:2 == 10000
	ENDIF
ENDIF

PRINT 射精
BAR BASE:MASTER:2,MAXBASE:MASTER:2,32
PRINTFORML ({BASE:MASTER:2}/{MAXBASE:MASTER:2})

IF ASSIPLAY
	IF TALENT:ASSI:121 || TALENT:ASSI:122
		PRINT 射精（助手）
		BAR BASE:ASSI:2,MAXBASE:ASSI:2,32
		PRINTFORML ({BASE:ASSI:2}/{MAXBASE:ASSI:2})
	ENDIF
ENDIF

IF TALENT:TARGET:121 || TALENT:TARGET:122
	PRINT 射精（
	PRINTS NAME:TARGET
	PRINT ）
	BAR BASE:2,MAXBASE:2,32
	PRINTFORML ({BASE:2}/{MAXBASE:2})
ENDIF
;---------------------------------------------------------
; 体力バー表示
;---------------------------------------------------------
@LIFE_BAR, ARG:0

SIF ARG:0 < 0
	RETURN 0

X = ARG:0

SIF MAXBASE:X:0 <= 0
	RETURN

PRINT 体力
A = BASE:X:0
SIF BASE:X:0 < 0
	A = 0
BAR A, MAXBASE:X:0, 32
PRINTFORML ({A}/{MAXBASE:X:0})

;-----------------------------------------------------------------
; 汚れの表示
;-----------------------------------------------------------------
@STAIN_INFO

VARSET LOCALS , 
LOCALS:0 = の口：
LOCALS:1 = の手：
LOCALS:2 = のＰ：
LOCALS:3 = のＶ：
LOCALS:4 = のＡ：
LOCALS:5 = の胸：
LOCALS:6 = の足：

REPEAT STAINMAX
	;P
	SIF COUNT == 2 && TALENT:MASTER:121 == 0 && TALENT:MASTER:122 == 0
		CONTINUE
	;V
	SIF COUNT == 3 && TALENT:MASTER:122
		CONTINUE

	PRINTS NAME:MASTER
	PRINTS LOCALS:COUNT
	
	SIF STAIN:MASTER:COUNT & 1
		PRINT <Ｖ>
	SIF STAIN:MASTER:COUNT & 2
		PRINT <Ｐ>
	SIF STAIN:MASTER:COUNT & 4
		PRINT <精>
	SIF STAIN:MASTER:COUNT & 8
		PRINT <Ａ>
	SIF STAIN:MASTER:COUNT & 16
		PRINT <血>
	PRINTL 
REND

REPEAT STAINMAX
	SIF COUNT == 2 && TALENT:121 == 0 && TALENT:122 == 0
		CONTINUE
	SIF COUNT == 3 && TALENT:122
		CONTINUE
	
	PRINTS NAME:TARGET
	PRINTS LOCALS:COUNT
	
	SIF STAIN:COUNT & 1
		PRINT <Ｖ>
	SIF STAIN:COUNT & 2
		PRINT <Ｐ>
	SIF STAIN:COUNT & 4
		PRINT <精>
	SIF STAIN:COUNT & 8
		PRINT <Ａ>
	SIF STAIN:COUNT & 16
		PRINT <血>
	PRINTL 
REND

REPEAT STAINMAX
	SIF ASSI < 0
		BREAK

	SIF COUNT == 2 && TALENT:121 == 0 && TALENT:122 == 0
		CONTINUE
	SIF COUNT == 3 && TALENT:122
		CONTINUE
	
	PRINTS NAME:ASSI
	PRINTS LOCALS:COUNT
	
	SIF STAIN:ASSI:COUNT & 1
		PRINT <Ｖ>
	SIF STAIN:ASSI:COUNT & 2
		PRINT <Ｐ>
	SIF STAIN:ASSI:COUNT & 4
		PRINT <精>
	SIF STAIN:ASSI:COUNT & 8
		PRINT <Ａ>
	SIF STAIN:ASSI:COUNT & 16
		PRINT <血>
	PRINTL 
REND

WAIT

;---------------------------------------------------------
; セーブ情報
;---------------------------------------------------------
@SAVEINFO

IF TIME == 0
	PUTFORM {DAY+1}日目 - 朝 
ELSE
	PUTFORM {DAY+1}日目 - 夜 
ENDIF

IF TARGET >= 0
	PUTFORM %NAME:TARGET%調教中(従{ABL:0}欲{ABL:1}技{ABL:2}) 
ENDIF

SIF ASSI >= 0
	PUTFORM 助手：%CALLNAME:ASSI%
